# fio - тестирование производительности дискового массива в ОС Linux

Created by: В.В.
Created time: May 28, 2023 6:55 AM
Last edited by: В.В.
Last edited time: May 28, 2023 1:03 PM
Tags: fio, linux, инструкция, инфраструктура, мониторинг, производительность

Для тестирования производительности дискового массива в ОС Linux можно использовать несколько утилит. Одной из самых распространенных и полезных является утилита **`fio`** (Flexible I/O Tester).

Вот пошаговая инструкция по проведению тестирования производительности дискового массива с использованием утилиты **`fio`**:

1. Установите утилиту **`fio`**, если она не установлена в вашей системе. Вы можете установить ее с помощью менеджера пакетов вашего дистрибутива Linux. Например, для Ubuntu команда для установки выглядит так:
    
    ```bash
    sudo apt-get install fio
    ```
    
2. Создайте файл сценария для тестирования дискового массива. Например, создайте файл **`disk-test.fio`** и откройте его в текстовом редакторе:
    
    ```bash
    nano disk-test.fio
    ```
    
3. Вставьте следующий содержимое в файл **`disk-test.fio`**:
    
    ```bash
    [global]
    ioengine=libaio
    direct=1
    runtime=60
    time_based
    
    [disk-1]
    filename=/dev/sda
    rw=randread
    bs=4k
    numjobs=4
    
    [disk-2]
    filename=/dev/sdb
    rw=randwrite
    bs=4k
    numjobs=4
    ```
    
    В этом примере настраивается тестирование чтения случайных блоков (**`randread`**) на диске **`/dev/sda`** и записи случайных блоков (**`randwrite`**) на диск **`/dev/sdb`**. Вы можете изменить параметры тестирования в соответствии с вашими потребностями.
    
4. Сохраните файл **`disk-test.fio`** и закройте редактор.
5. Запустите тестирование с помощью утилиты **`fio`** и передайте ей созданный файл сценария:
    
    ```bash
    fio disk-test.fio
    ```
    
    Утилита **`fio`** выполнит тестирование производительности дискового массива в течение 60 секунд (указано в параметре **`runtime`**), используя настройки из файла **`disk-test.fio`**.
    
6. После завершения тестирования утилита **`fio`** выведет результаты производительности дискового массива, включая значения скорости чтения и записи, задержки и другие показатели.

Это основная инструкция по проведению тестирования производительности дискового массива в ОС Linux с использованием утилиты **`fio`**. Обратите внимание, что в зависимости от ваших потребностей и конфигурации системы могут потребоваться дополнительные настройки
